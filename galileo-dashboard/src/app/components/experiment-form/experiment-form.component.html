<form class="form-inline" [formGroup]="form">
  <div class="col-4">
    <app-text-input
      [form]="form"
      controlName="name"
      name="Name"
      placeholder="Lazy-Exp"
    ></app-text-input>
    <app-text-input
      [form]="form"
      controlName="creator"
      name="Creator"
      placeholder="User"
    ></app-text-input>
  </div>
  <div class="col-4">
    <app-time-input
      [form]="form"
      timeFormControl="interval"
      unitFormControl="intervalUnit"
      name="Interval"
    ></app-time-input>
    <app-time-input
      [form]="form"
      timeFormControl="duration"
      unitFormControl="durationUnit"
      name="Duration"
    ></app-time-input>
  </div>
  <div class="col-4">
    <app-text-input
      [form]="form"
      controlName="maxRps"
      isNumber="true"
      name="Max RPS">
    </app-text-input>
    <div class="row">
      <button (click)="submit()" type="submit" class="btn btn-primary  mb-2">Submit</button>
      <button (click)="addWorkload()" type="submit" class="btn btn-success  mb-2">Add workload</button>
    </div>
  </div>
</form>
<ngb-alert *ngIf="successMessage" type="success" (close)="successMessage = null">{{ successMessage }}</ngb-alert>
<ngb-alert *ngIf="errorMessage" type="danger" (close)="errorMessage = null">{{ errorMessage }}</ngb-alert>
<div class="row" *ngFor="let entry of workloads"
>
  <app-workload-form
    [id]="entry[0]"
    [curveForm]="curveForm"
    [services]="services"
    [duration]="form.get('duration').value"
    [interval]="form.get('interval').value"
    [maxRps]="form.get('maxRps').value"
    (workloadSubmission)="handleWorkloadSubmission(entry[0],$event)"
    (removeWorkload)="removeWorkload(entry[0])"
  ></app-workload-form>
</div>
